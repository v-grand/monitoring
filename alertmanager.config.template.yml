global:
  resolve_timeout: 5m

route:
  receiver: 'team-notifications'
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h
  routes:
    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã –∏–¥—É—Ç –≤ –æ–±–∞ –∫–∞–Ω–∞–ª–∞
    - match:
        severity: critical
      receiver: 'critical-alerts'
      continue: true
    # Warnings —Ç–æ–ª—å–∫–æ –≤ Slack
    - match:
        severity: warning
      receiver: 'slack-notifications'

receivers:
  # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–µ–º–Ω–∏–∫ - –∫–æ–º–±–æ Slack + Email –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö
  - name: 'critical-alerts'
    slack_configs:
      - api_url: 'SLACK_WEBHOOK_URL_PLACEHOLDER'
        channel: '#critical-alerts'
        title: 'üö® CRITICAL: {{ .GroupLabels.alertname }}'
        text: |
          *Summary:* {{ index .Alerts 0 "Annotations" "summary" }}
          *Description:* {{ index .Alerts 0 "Annotations" "description" }}
          *Firing:* {{ .Alerts | len }}
        send_resolved: true
    email_configs:
      - to: 'EMAIL_PLACEHOLDER'
        from: 'alertmanager@monitoring.local'
        smarthost: 'SMTP_SERVER_PLACEHOLDER:SMTP_PORT_PLACEHOLDER'
        auth_username: 'EMAIL_PLACEHOLDER'
        auth_password: 'SMTP_PASSWORD_PLACEHOLDER'
        require_tls: true
        headers:
          Subject: '[CRITICAL] {{ .GroupLabels.alertname }}'

  # Slack –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
  - name: 'slack-notifications'
    slack_configs:
      - api_url: 'SLACK_WEBHOOK_URL_PLACEHOLDER'
        channel: '#monitoring'
        title: '‚ö†Ô∏è  {{ .GroupLabels.alertname }}'
        text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'
        send_resolved: true

  # –†–µ–∑–µ—Ä–≤–Ω—ã–π –ø—Ä–∏–µ–º–Ω–∏–∫ (email –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –≤—ã—à–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ)
  - name: 'team-notifications'
    email_configs:
      - to: 'EMAIL_PLACEHOLDER'
        from: 'alertmanager@monitoring.local'
        smarthost: 'SMTP_SERVER_PLACEHOLDER:SMTP_PORT_PLACEHOLDER'
        auth_username: 'EMAIL_PLACEHOLDER'
        auth_password: 'SMTP_PASSWORD_PLACEHOLDER'
        require_tls: true
        headers:
          Subject: 'Alert: {{ .GroupLabels.alertname }}'

# Note: grouping settings are configured under `route` (group_by/group_wait/group_interval/repeat_interval)
# Do not use a top-level `grouping` key in Alertmanager config (unsupported).
